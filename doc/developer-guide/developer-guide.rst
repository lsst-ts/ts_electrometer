.. _Developer_Guide:

#########################################
Electrometer Developer Guide
#########################################

The Electrometer is a standard salobj CSC.
It communicates over a RS-232 serial communication.

`Docushare collection <https://docushare.lsst.org/docushare/dsweb/View/Collection-5176>`_

.. _Dependencies:

Dependencies
============

* `SAL <https://ts-sal.lsst.io>`_ - v4.0.0
* ts_salobj - v5.x.0
* pyserial - v3.4.0

.. Linking to the previous versions may also be worthwhile, depending on the CSC

.. _API:

Electrometer API
=============================

The content in this section is autogenerated from docstrings.

.. The code below should insert the docstrings from the code.

.. automodapi:: lsst.ts.electrometer
    :no-main-docstr:
    :no-inheritance-diagram:


.. _Build:

Build and Test
==============

.. prompt:: bash

    setup -kr .
    pip install pyserial
    scons


alternatively

.. prompt:: bash

    pip install .[dev]
    pytest --cov lsst.ts.electrometer -ra


.. _Usage:

Usage
=====

.. prompt:: bash

    RunElectrometer.py 1


.. _Simulator:

Simulator
=========

A prototype simulator is provided but it needs a way to convert a tcp/ip connection to serial.
The simulator opens a tcp/ip connection as thats easier to handle for writing a simulator.
However, the device is a serial connection and so the simulator needs to be able to transfer the data to a serial port.


.. _Firmware:

Updating Firmware of the Electrometer
==================================================

The firmware for the electrometer is not updatable.


.. _Documentation:

Building the Documentation
==========================

It is assumed that the user is inside the develop-env container.
The following command will build a local copy of the documentation.

.. prompt:: bash

    package-docs clean && package-docs build

.. _Contributing:

Contributing
============

Code and documentation contributions utilize pull-requests on github.
Feature requests can be made by filing a Jira ticket with the `ts_electrometer` label.
In all cases, reaching out to the :ref:`contacts for this CSC <ts_xml:index:master-csc-table:Electrometer>` is recommended.

